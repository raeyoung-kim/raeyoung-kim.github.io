<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="다른 도메인간 쿠키 전송하기(cors-credentials) (react &amp; node.js)" /><meta name="author" content="kim rae young" /><meta property="og:locale" content="ko" /><meta name="description" content="프론트엔드 netlify 배포 (cors) 프론트엔드와 백엔드의 도메인 주소가 다른 경우 cors 문제가 생기는데 로컬에서 이를 해결하기 위해 프론트 쪽에서 proxy 설정을 해두어 cors 문제를 해결했었다. 하지만 netlify에 배포한 뒤에는 cors 에러가 아닌 계속 404에러가 나타났다. 다시 로컬로 돌아가서 확인해보니 또 cors 문제없이 서버와의 통신이 가능했다. cors 에러가 아닌 404에러 메시지 나타나기 때문에 해결하는 데 굉장히 어려움이 있었다. 로컬에서는 아무 이상 없이 돌아갔기 때문에 왜 이런 에러가 나타나는지 이해할 수 없었다. 어쨌든 서버와 통신을 할 수 없었고 proxy 설정이 뭔가 잘못돼서 404에러는 나타내는 게 아닌가 생각했다. 이리저리 많은 블로그나 문서에 나와있는 여러 가지 방법을 모두 시도해보았지만 해결되지 않았다. 그렇게 계속 시도한 끝에 스택오버플로우에서 netlify에서는 cors 문제를 서버에서 해결해 주어야 한다는 글을 보았다. 개인 프로젝트를 진행했었을 때에도 netlify로 프론트엔드쪽 배포를 했었는데 cors 문제를 서버에서 해결했었다. 이번 프로젝트의 경우 proxy로 cors 문제를 해결했었고 proxy로 문제를 해결하고 싶었는데 결국 netlify에서 배포 후 서버와 통신하기 위해서는 cors 문제를 서버에서 해결해 주어야 했었다." /><meta property="og:description" content="프론트엔드 netlify 배포 (cors) 프론트엔드와 백엔드의 도메인 주소가 다른 경우 cors 문제가 생기는데 로컬에서 이를 해결하기 위해 프론트 쪽에서 proxy 설정을 해두어 cors 문제를 해결했었다. 하지만 netlify에 배포한 뒤에는 cors 에러가 아닌 계속 404에러가 나타났다. 다시 로컬로 돌아가서 확인해보니 또 cors 문제없이 서버와의 통신이 가능했다. cors 에러가 아닌 404에러 메시지 나타나기 때문에 해결하는 데 굉장히 어려움이 있었다. 로컬에서는 아무 이상 없이 돌아갔기 때문에 왜 이런 에러가 나타나는지 이해할 수 없었다. 어쨌든 서버와 통신을 할 수 없었고 proxy 설정이 뭔가 잘못돼서 404에러는 나타내는 게 아닌가 생각했다. 이리저리 많은 블로그나 문서에 나와있는 여러 가지 방법을 모두 시도해보았지만 해결되지 않았다. 그렇게 계속 시도한 끝에 스택오버플로우에서 netlify에서는 cors 문제를 서버에서 해결해 주어야 한다는 글을 보았다. 개인 프로젝트를 진행했었을 때에도 netlify로 프론트엔드쪽 배포를 했었는데 cors 문제를 서버에서 해결했었다. 이번 프로젝트의 경우 proxy로 cors 문제를 해결했었고 proxy로 문제를 해결하고 싶었는데 결국 netlify에서 배포 후 서버와 통신하기 위해서는 cors 문제를 서버에서 해결해 주어야 했었다." /><link rel="canonical" href="https://raeyoung-kim.github.io/posts/%EB%8B%A4%EB%A5%B8%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B0%84%EC%BF%A0%ED%82%A4%EC%A0%84%EC%86%A1%ED%95%98%EA%B8%B0/" /><meta property="og:url" content="https://raeyoung-kim.github.io/posts/%EB%8B%A4%EB%A5%B8%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B0%84%EC%BF%A0%ED%82%A4%EC%A0%84%EC%86%A1%ED%95%98%EA%B8%B0/" /><meta property="og:site_name" content="개발 노트" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-07-05T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="다른 도메인간 쿠키 전송하기(cors-credentials) (react &amp; node.js)" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"kim rae young"},"dateModified":"2022-06-30T21:26:40+09:00","datePublished":"2020-07-05T00:00:00+09:00","description":"프론트엔드 netlify 배포 (cors) 프론트엔드와 백엔드의 도메인 주소가 다른 경우 cors 문제가 생기는데 로컬에서 이를 해결하기 위해 프론트 쪽에서 proxy 설정을 해두어 cors 문제를 해결했었다. 하지만 netlify에 배포한 뒤에는 cors 에러가 아닌 계속 404에러가 나타났다. 다시 로컬로 돌아가서 확인해보니 또 cors 문제없이 서버와의 통신이 가능했다. cors 에러가 아닌 404에러 메시지 나타나기 때문에 해결하는 데 굉장히 어려움이 있었다. 로컬에서는 아무 이상 없이 돌아갔기 때문에 왜 이런 에러가 나타나는지 이해할 수 없었다. 어쨌든 서버와 통신을 할 수 없었고 proxy 설정이 뭔가 잘못돼서 404에러는 나타내는 게 아닌가 생각했다. 이리저리 많은 블로그나 문서에 나와있는 여러 가지 방법을 모두 시도해보았지만 해결되지 않았다. 그렇게 계속 시도한 끝에 스택오버플로우에서 netlify에서는 cors 문제를 서버에서 해결해 주어야 한다는 글을 보았다. 개인 프로젝트를 진행했었을 때에도 netlify로 프론트엔드쪽 배포를 했었는데 cors 문제를 서버에서 해결했었다. 이번 프로젝트의 경우 proxy로 cors 문제를 해결했었고 proxy로 문제를 해결하고 싶었는데 결국 netlify에서 배포 후 서버와 통신하기 위해서는 cors 문제를 서버에서 해결해 주어야 했었다.","headline":"다른 도메인간 쿠키 전송하기(cors-credentials) (react &amp; node.js)","mainEntityOfPage":{"@type":"WebPage","@id":"https://raeyoung-kim.github.io/posts/%EB%8B%A4%EB%A5%B8%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B0%84%EC%BF%A0%ED%82%A4%EC%A0%84%EC%86%A1%ED%95%98%EA%B8%B0/"},"url":"https://raeyoung-kim.github.io/posts/%EB%8B%A4%EB%A5%B8%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B0%84%EC%BF%A0%ED%82%A4%EC%A0%84%EC%86%A1%ED%95%98%EA%B8%B0/"}</script><title>다른 도메인간 쿠키 전송하기(cors-credentials) (react & node.js) | 개발 노트</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="개발 노트"><meta name="application-name" content="개발 노트"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/avatar.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">개발 노트</a></div><div class="site-subtitle font-italic">동물을 좋아하고, 성장하는 것에 관심이 많습니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/raeyoung-kim" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['760kry','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>다른 도메인간 쿠키 전송하기(cors-credentials) (react & node.js)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>다른 도메인간 쿠키 전송하기(cors-credentials) (react & node.js)</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/raeyoung-kim">kim rae young</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1593874800" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2020-07-05 </em> </span> <span> Updated <em class="timeago" data-ts="1656592000" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-06-30 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1084 words"> <em>6 min</em> read</span></div></div></div><div class="post-content"><h2 id="프론트엔드-netlify-배포-cors">프론트엔드 netlify 배포 (cors) <a href="#프론트엔드-netlify-배포-cors" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><p>프론트엔드와 백엔드의 도메인 주소가 다른 경우 cors 문제가 생기는데 로컬에서 이를 해결하기 위해 프론트 쪽에서 proxy 설정을 해두어 cors 문제를 해결했었다. 하지만 netlify에 배포한 뒤에는 cors 에러가 아닌 계속 404에러가 나타났다. 다시 로컬로 돌아가서 확인해보니 또 cors 문제없이 서버와의 통신이 가능했다. cors 에러가 아닌 404에러 메시지 나타나기 때문에 해결하는 데 굉장히 어려움이 있었다. 로컬에서는 아무 이상 없이 돌아갔기 때문에 왜 이런 에러가 나타나는지 이해할 수 없었다. 어쨌든 서버와 통신을 할 수 없었고 proxy 설정이 뭔가 잘못돼서 404에러는 나타내는 게 아닌가 생각했다. 이리저리 많은 블로그나 문서에 나와있는 여러 가지 방법을 모두 시도해보았지만 해결되지 않았다. 그렇게 계속 시도한 끝에 스택오버플로우에서 netlify에서는 cors 문제를 서버에서 해결해 주어야 한다는 글을 보았다. 개인 프로젝트를 진행했었을 때에도 netlify로 프론트엔드쪽 배포를 했었는데 cors 문제를 서버에서 해결했었다. 이번 프로젝트의 경우 proxy로 cors 문제를 해결했었고 proxy로 문제를 해결하고 싶었는데 결국 netlify에서 배포 후 서버와 통신하기 위해서는 cors 문제를 서버에서 해결해 주어야 했었다.</p><h2 id="다른-도메인간-쿠키-전송하기credentials">다른 도메인간 쿠키 전송하기(credentials) <a href="#다른-도메인간-쿠키-전송하기credentials" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><p>서버에서 cors 문제를 해결한 후 프론트와 서버 간의 쿠키 전송이 되지 않아 로그인을 할 수 없었다. 요청과 응답에 헤더를 설정해 준 뒤 쿠키 전송에 성공하였다. 서버에서 origin을 허용하고 클라이언트와 서버 모두 Credentials를 활성화해야 한다.</p><h3 id="server">server <a href="#server" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li><p><strong>Access-Control-Allow-Origin</strong></p><p>요청을 보내는 프론트 주소와 응답을 보내는 백엔드 주소가 다른경우 cors에러가 발생한다. 이 때, 서버에서 응답메시지로 Access-Control-Allow-Origin에 허용할 <code class="language-plaintext highlighter-rouge">클라이언트 주소</code> 또는 <code class="language-plaintext highlighter-rouge">*</code> 을 적어 주어야 에러가 나지 않는다. <code class="language-plaintext highlighter-rouge">*</code> 을 명시해 줄 경우 모든 요청을 보내는 모든 프론트 주소를 허용한다는 의미이다. 이렇게 <code class="language-plaintext highlighter-rouge">*</code>을 명시해줄 경우 모든 요청을 허용하기 때문에 보안에 취약해질 수 있다.</p><ul><li>다른 도메인간 쿠키를 전송하기 위해서 <strong>Access-Control-Allow-Origin에 <code class="language-plaintext highlighter-rouge">*</code> <em>(와일드 카드)를 사용할 수 없다. 허용할 <code class="language-plaintext highlighter-rouge">origin</code> 또는 <code class="language-plaintext highlighter-rouge">true</code>를 명시해야한다.</em></strong></ul><li><p><strong>Access-Control-Allow-Credentials은 <code class="language-plaintext highlighter-rouge">true</code>로 설정한다.</strong></p></ul><div class="language-jsx highlighter-rouge"><div class="code-header"> <span data-label-text="Jsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nx">res</span><span class="p">.</span><span class="nx">header</span><span class="p">(</span><span class="dl">"</span><span class="s2">Access-Control-Allow-Origin</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">http://localhost:3000</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">header</span><span class="p">(</span><span class="dl">'</span><span class="s1">Access-Control-Allow-Methods</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">POST, PUT, GET, DELETE</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">header</span><span class="p">(</span><span class="dl">"</span><span class="s2">Access-Control-Allow-Credentials</span><span class="dl">"</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">header</span><span class="p">(</span><span class="dl">'</span><span class="s1">Access-Control-Allow-Headers</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">X-Requested-With, Content-Type</span><span class="dl">'</span><span class="p">);</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>- cors 미들웨어를 사용할 경우
</pre></table></code></div></div><div class="language-js highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/user</span><span class="dl">'</span><span class="p">,</span> <span class="nx">cors</span><span class="p">({</span>
  <span class="na">orgin</span><span class="p">:</span> <span class="o">&lt;</span><span class="nx">허용할</span> <span class="nx">클라이언트</span> <span class="nx">주소</span><span class="o">&gt;</span><span class="p">,</span> <span class="c1">// or true</span>
  <span class="na">methods</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">PUT</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">DELETE</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">PATCH</span><span class="dl">'</span><span class="p">],</span> <span class="c1">// 허용할 메소드</span>
  <span class="na">credictials</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> 
  <span class="na">allowedHeaders</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Origin</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">X-Requested-With</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Accept</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">],</span>
<span class="p">}),</span> <span class="nx">userRouter</span><span class="p">);</span>

</pre></table></code></div></div><h3 id="client">client <a href="#client" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>클라이언트에서도 요청을 보낼 때, 헤더에 Credentials를 활성화해야한다. 클라이언트에서 헤더에 Credentials 활성화를 한 후 요청을 보내는 데이 아래의 세 가지 방법을 사용했었다. 다른 블로그에서는 첫 번째나 두번째 방법으로 해결이 되었지만 나 같은 경우 마지막 방법으로 해결이 되었다. 세 가지모두 같은 의미이긴 한데.. 디폴트로 설정한 후 해결이 되었다.</p><ul><li>axios.create({withCredentials: true})</ul><div class="language-jsx highlighter-rouge"><div class="code-header"> <span data-label-text="Jsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="nx">axios</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">api</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="na">withCredentials</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">});</span>

<span class="nx">api</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>

</pre></table></code></div></div><ul><li>withCredentials: true 를 설정한 후 요청을 보낸다.</ul><div class="language-jsx highlighter-rouge"><div class="code-header"> <span data-label-text="Jsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="nx">axios</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">withCredentials</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>
</pre></table></code></div></div><ul><li><strong>default로 설정한다. (index.js 에 한번만 설정해 주어도 된다.)</strong></ul><div class="language-jsx highlighter-rouge"><div class="code-header"> <span data-label-text="Jsx"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="nx">axios</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">axios</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">withCredentials</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/cs/'>CS</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/cors-credentials/" class="post-tag no-text-decoration" >cors-credentials</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=다른 도메인간 쿠키 전송하기(cors-credentials) (react &amp; node.js) - 개발 노트&amp;url=https://raeyoung-kim.github.io/posts/%EB%8B%A4%EB%A5%B8%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B0%84%EC%BF%A0%ED%82%A4%EC%A0%84%EC%86%A1%ED%95%98%EA%B8%B0/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=다른 도메인간 쿠키 전송하기(cors-credentials) (react &amp; node.js) - 개발 노트&amp;u=https://raeyoung-kim.github.io/posts/%EB%8B%A4%EB%A5%B8%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B0%84%EC%BF%A0%ED%82%A4%EC%A0%84%EC%86%A1%ED%95%98%EA%B8%B0/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://raeyoung-kim.github.io/posts/%EB%8B%A4%EB%A5%B8%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B0%84%EC%BF%A0%ED%82%A4%EC%A0%84%EC%86%A1%ED%95%98%EA%B8%B0/&amp;text=다른 도메인간 쿠키 전송하기(cors-credentials) (react &amp; node.js) - 개발 노트" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/DOM/">Document Object Model</a><li><a href="/posts/CSS-layout/">CSS layout</a><li><a href="/posts/Linked-List/">Linked List / javascript 구현</a><li><a href="/posts/Tree-vs-BinarySearchTree/">Tree vs Binary Search Tree / javascript 구현</a><li><a href="/posts/hash-table/">hash table / javascript 구현</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/data-structure/">data structure</a> <a class="post-tag" href="/tags/typescript/">typescript</a> <a class="post-tag" href="/tags/oop/">OOP</a> <a class="post-tag" href="/tags/promise/">Promise</a> <a class="post-tag" href="/tags/react-native/">react-native</a> <a class="post-tag" href="/tags/reduxjs-toolkit/">@reduxjs/toolkit</a> <a class="post-tag" href="/tags/arrow-function/">Arrow Function</a> <a class="post-tag" href="/tags/async-await/">async await</a> <a class="post-tag" href="/tags/asynchronous/">asynchronous</a> <a class="post-tag" href="/tags/aws-elastic-beanstalk/">AWS Elastic Beanstalk</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/HTTP%EC%99%80-HTTPS/"><div class="card-body"> <em class="timeago small" data-ts="1659279600" > 2022-08-01 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>HTTP와 HTTPS</h3><div class="text-muted small"><p> HTTP 란? http는 Hyper Text Transfer Protocol의 약자로 웹에서 요청과 응답의 형태로 정보를 주고받을 수 있는 프로토콜입니다. TCP 기반으로 작동하며 비연결성, 비상태성 특징을 가집니다. 이로 인해 많은 실제 동시 접속을 최소화하여 더 많은 유저의 요청 처리를 할 수 있습니다.  ...</p></div></div></a></div><div class="card"> <a href="/posts/%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C(netlify)-%EB%B0%B1%EC%97%94%EB%93%9C(AWS-Elastic-Beanstalk)-%EB%B0%B0%ED%8F%AC/"><div class="card-body"> <em class="timeago small" data-ts="1588172400" > 2020-04-30 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>프론트엔드(netlify) 백엔드(AWS Elastic Beanstalk) 배포</h3><div class="text-muted small"><p> 처음으로 풀스택으로 프로젝트를 시작했다. 혼자 해결해 나가는 부분에서 삽질을 많이 했다. 아직도 미흡한 점이 많지만 일단 배포를 먼저 해보기로 결정했다. 고치고 싶은 부분이라면 끝도 없이 많기에 .. 프론트엔드는 react와 redux를 사용해서 작업했고 netlify 배포 서비스를 사용했다. 백엔드는 node.js express 와 mongoDB...</p></div></div></a></div><div class="card"> <a href="/posts/https%EC%99%80-SSL%EC%9D%B8%EC%A6%9D/"><div class="card-body"> <em class="timeago small" data-ts="1588690800" > 2020-05-06 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>https와 SSL인증 (다른 컴퓨터에서 로그인이 되지 않을 때)& Page Not Found on Netlify with React Router</h3><div class="text-muted small"><p> react로 소셜 로그인을 구현했는데 배포를 하고 나서 내 컴퓨터가 아닌 다른 컴퓨터 또는 핸드폰으로는 로그인 후 다음 화면으로 넘어가지 않는다. 내 컴퓨터로만 작업을 하다 보니 그런 문제가 있는지도 몰랐었다. 왜 다른 컴퓨터나 핸드폰에선 로그인이 정상적으로 작동되지 않는 걸까 … 또 배포 후 다른 문제점은 url 주소창에서 url을 직접 작성해 라우...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/mySQL/" class="btn btn-outline-primary" prompt="Older"><p>mySQL</p></a> <a href="/posts/ReactNative-%EA%B8%B0%EB%B3%B8%EC%9B%90%EB%A6%AC%EB%B0%8F%EA%B0%9C%EB%B0%9C%ED%99%98%EA%B2%BD/" class="btn btn-outline-primary" prompt="Newer"><p>react-native의 간단한 기본 원리 및 개발 환경</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/raeyoung-kim">김래영</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/data-structure/">data structure</a> <a class="post-tag" href="/tags/typescript/">typescript</a> <a class="post-tag" href="/tags/oop/">OOP</a> <a class="post-tag" href="/tags/promise/">Promise</a> <a class="post-tag" href="/tags/react-native/">react-native</a> <a class="post-tag" href="/tags/reduxjs-toolkit/">@reduxjs/toolkit</a> <a class="post-tag" href="/tags/arrow-function/">Arrow Function</a> <a class="post-tag" href="/tags/async-await/">async await</a> <a class="post-tag" href="/tags/asynchronous/">asynchronous</a> <a class="post-tag" href="/tags/aws-elastic-beanstalk/">AWS Elastic Beanstalk</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
